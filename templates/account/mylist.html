{% extends "base.html" %}
{% block title %}마이 리스트 | 2beats{% endblock %}
{% block content %}
  <div class="card" style="margin-bottom:16px;">
    <div style="display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap;">
      <div>
        <h1 style="margin:0 0 4px;">마이 리스트</h1>
        <p class="muted" style="margin:0;">미래에 듣고/보고 싶은 콘텐츠를 폴더로 관리하세요.</p>
      </div>
      <div style="display:inline-flex; border:1px solid var(--border); border-radius:12px; overflow:hidden;">
        <a class="btn btn-secondary" href="?tab=music" style="border-radius:0; border:none; padding:10px 16px; {% if tab == 'music' %}background:rgba(124,58,237,0.16); color:var(--text); font-weight:700;{% endif %}">음악</a>
        <a class="btn btn-secondary" href="?tab=video" style="border-radius:0; border:none; padding:10px 16px; {% if tab == 'video' %}background:rgba(124,58,237,0.16); color:var(--text); font-weight:700;{% endif %}">영상</a>
      </div>
    </div>
  </div>

  <div class="grid grid-two" style="margin-bottom:16px;">
    {% for playlist in playlists %}
      <div class="card">
        <span class="pill-label">{% if tab == 'music' %}음악{% else %}영상{% endif %}</span>
        <h3 style="margin:10px 0 4px;">{{ playlist.folder_name }}</h3>
        <p class="muted" style="margin:0 0 8px;">생성일 {{ playlist.created_at|date:"Y-m-d H:i" }}</p>
        <a class="btn btn-primary" style="margin-top:6px;" href="{% url 'playlist_detail' playlist.id %}?kind={{ tab }}">자세히 보기</a>
      </div>
    {% empty %}
      <div class="card" style="grid-column:1 / -1;">
        <p class="muted" style="margin:0;">아직 {% if tab == 'music' %}음악{% else %}영상{% endif %} 플레이리스트가 없습니다. 새로 만들어 보세요.</p>
      </div>
    {% endfor %}
  </div>

  <div class="card card-plain">
    <h3 style="margin:0 0 8px;">새 플레이리스트 만들기</h3>
    <form method="post" action="?tab={{ tab }}" style="display:grid; gap:10px;">
      {% csrf_token %}
      <div>
        <label for="{{ form.folder_name.id_for_label }}" class="muted">폴더 이름</label>
        {{ form.folder_name }}
      </div>
      <button type="submit" class="btn btn-primary" style="border:none; width:180px;">생성</button>
    </form>
  </div>
{% endblock %}
