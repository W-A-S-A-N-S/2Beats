{% extends "base.html" %}
{% block title %}마이 히스토리 | 2beats{% endblock %}
{% block content %}
  <div class="card" style="margin-bottom:16px;">
    <h1 style="margin:0 0 6px;">마이 히스토리</h1>
    <p class="muted" style="margin:0;">최근 감상한 음악과 영상을 한눈에 확인하세요.</p>
  </div>

  <div class="grid grid-two">
    <div class="card">
      <h3 style="margin:0 0 8px;">음악 히스토리</h3>
      {% if music_history %}
        <table>
          <thead>
            <tr>
              <th>제목</th>
              <th>아티스트</th>
              <th>재생 시각</th>
            </tr>
          </thead>
          <tbody>
            {% for item in music_history %}
              <tr>
                <td>
                  <a href="{% url 'music_explore:detail' item.music.id %}" 
                     style="font-weight:bold; color:var(--text); text-decoration:none;">
                    {{ item.music.music_title }}
                  </a>
                </td>
                <td class="muted">{{ item.music.music_singer }}</td>
                <td class="muted">{{ item.played_at|date:"Y-m-d H:i" }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      {% else %}
        <p class="muted" style="margin:0;">아직 음악 재생 기록이 없습니다. 지금 감상해보세요.</p>
      {% endif %}
    </div>

    <div class="card">
      <h3 style="margin:0 0 8px;">영상 히스토리</h3>
      {% if video_history %}
        <table>
          <thead>
            <tr>
              <th>제목</th>
              <th>아티스트</th>
              <th>재생 시각</th>
            </tr>
          </thead>
          <tbody>
            {% for item in video_history %}
              <tr>
                <td>
                  <a href="{% url 'video_explore:video_detail' item.video.id %}" 
                     style="font-weight:bold; color:var(--text); text-decoration:none;">
                    {{ item.video.video_title }}
                  </a>
                </td>
                <td class="muted">{{ item.video.video_singer }}</td>
                <td class="muted">{{ item.played_at|date:"Y-m-d H:i" }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      {% else %}
        <p class="muted" style="margin:0;">아직 영상 재생 기록이 없습니다. 영상을 탐색해보세요.</p>
      {% endif %}
    </div>
  </div>
{% endblock %}